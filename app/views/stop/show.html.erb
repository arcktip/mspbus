<% if @stop.nil? %>
  <div class="alert alert-info">Stop does not exist.</div>
<% else %>
<div id="stop-container">
<div class="stop-header">
  <% unless isCarStop(@stop) %>
    <span id="thestop" data-attr="<%= @stop.stop_id %>" style="font-weight:bold;margin:0"><%= @stop.stop_name %></span>
  <% end %>
  <div class="btn pull-right" id="mapshow" style="margin-top:0;margin-right:5px;"><i class="icon-picture" style="font-size: 18px; color: grey;"></i></div>
  <% if user_signed_in? && !isCarStop(@stop) %>
  <div class="btn pull-right" id="makefav" style="margin-top:0;margin-right:5px;" title="Make this stop a favorite">
    <i class="icon-star star"></i>
  </div>
  <% end %>
</div>

<div id="alternate-template"></div>

<table class="table stop-table" style="display:none;">
  <thead>
    <tr style="font-weight:bold"><th style="padding-left:33px">Rt</th><th>Description</th><th>Arrival</th></tr>
  </thead>
  <tbody id="<%= @id %>" class="result" data-realtime='<%= @stop.to_json.to_s %>'>
  </tbody>
</table>
</div>
<!--TODO (from Richard): I've temporarily hidden the texting note until we get that system working right.-->
<!--<div style="text-align:center;font-weight:bold;">Texting? Text &ldquo;<%= @stop.stop_id %>&rdquo; to 832-WAITING.</div>-->

<div class="modal hide fade" id="mapmodal">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3><%= image_tag("logo-small.png", :size => "24x24", :alt => "MSP Bus Logo") %>&nbsp;Stop Location</h3>
  </div>
  <div class="modal-body" style="text-align:center;">
    <img src="http://maps.googleapis.com/maps/api/staticmap?center=<%= @lat %>,<%= @lon %>&zoom=15&size=500x300&maptype=roadmap&sensor=false&markers=color:blue%7C<%= @lat %>,<%= @lon %>">
  </div>
</div>

<div class="modal hide" id="stop-list">
  <div class="modal-header">
    <button type="button" class="close" id="close-ambiguity" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3><%= image_tag("logo-small.png", :size => "24x24", :alt => "MSP Bus Logo") %>&nbsp;Stop List</h3>
  </div>
  <div class="modal-body" style="text-align:center;">
    <table class="table routes-table" id="stop-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Stop Name</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>
<script>
  var stopid="<%= @id %>";
  var mapcenter = {
    lat: "<%= @lat %>",
    lon: "<%= @lon %>"
  };
</script>

<%= javascript_include_tag "show_stop" %>
<%= javascript_include_tag "general_navbar" %>

<% end %>
